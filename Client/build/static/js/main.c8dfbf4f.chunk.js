(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{45:function(e,t,n){e.exports=n(77)},51:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(36),s=n.n(o),i=(n(51),n(89)),c=n(86),l=n(7),d=n(8),u=n(10),m=n(9),h=n(5),g=n(11),v=n(18),p=n.n(v),b={"Content-Type":"application/json"},E=window.BASE_URL?window.BASE_URL:void 0,f=window.BASE_URL?E+"/back":"http://127.0.0.1:8001",w=window.BASE_URL?E+"/producer":"http://127.0.0.1:8002",O={login:function(e,t){return p.a.post(f+"/user/login",{username:e,password:t},{headers:b})},signup:function(e){return p.a.post(f+"/user/signup",e,{headers:b})},isAuth:function(){return null!==localStorage.getItem("token")},logout:function(){localStorage.clear()},retriveGoodies:function(){return p.a.get(f+"/goody/all")},retrieveEvents:function(){return p.a.get(f+"/event/all")},registerEvent:function(e){return p.a.post(w+"/register/event",e,{headers:b})},orderGoody:function(e){return p.a.post(w+"/order/goody",e,{headers:b})},retriveOrderedGoodies:function(){return p.a.get(f+"/goody/ordered?username="+localStorage.getItem("username"))},retrieveRegisteredEvents:function(){return p.a.get(f+"/event/registered?username="+localStorage.getItem("username"))}},j=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).retriveData=function(){O.retriveOrderedGoodies().then(function(e){var t=n.state;t.orderedGoodies=e.data,n.setState(t)}),O.retrieveRegisteredEvents().then(function(e){var t=n.state;t.registeredEvents=e.data,n.setState(t)})},n.state={orderedGoodies:{},registeredEvents:{},show:!1},n.handleShow=n.handleShow.bind(Object(h.a)(n)),n.handleClose=n.handleClose.bind(Object(h.a)(n)),n.retriveData(),setInterval(n.retriveData,2e3),n}return Object(g.a)(t,e),Object(d.a)(t,[{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"render",value:function(){var e=this.state,t=e.orderedGoodies,n=e.registeredEvents,a=t.pendingGoodies?t.pendingGoodies.length:"",o=t.confirmedGoodies?t.confirmedGoodies.length:"",s=n.pendingEvents?n.pendingEvents.length:"",i=n.confirmedEvents?n.confirmedEvents.length:"",c=""==a?o+" ordered":o+" confirmed on "+(a+o)+" ordered",l=""==s?i+" registered":i+" confirmed on "+(s+i)+" registered";return r.a.createElement("div",{className:this.props.className},r.a.createElement("div",{className:"command-header"},r.a.createElement("div",{className:"command-number"},r.a.createElement("b",null,"Events:")," ",l),r.a.createElement("div",{className:"command-number"},r.a.createElement("b",null,"Goodies:")," ",c)))}}]),t}(a.Component),y=n(85),S=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).disconnect=function(e){O.logout(),window.location="/"},n.disconnect.bind(Object(h.a)(n)),n}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"home-header row"},r.a.createElement("div",{className:"col-sm-9 not-centered-text"},r.a.createElement("h3",{className:"home-title pull-left"},"MUG Shop")),r.a.createElement("div",{className:"col-sm-2"},r.a.createElement(j,{className:"command-div"})),r.a.createElement("div",{className:"col-sm-1 button-command-div"},r.a.createElement(y.a,{onClick:this.disconnect,bsSize:"small",bsStyle:"logout",type:"submit"},"Logout")))}}]),t}(a.Component),k=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"div-title"},r.a.createElement("h3",{className:"page-title"},this.props.title),r.a.createElement("div",{className:""},this.props.children))}}]),t}(a.Component),C=n(81),N=n(82),G=n(44),I=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).orderOne=function(e){O.orderGoody({username:localStorage.getItem("username"),goodyName:n.props.goody.name})},n.orderOne.bind(Object(h.a)(n)),n}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"custom-card goody-card"},r.a.createElement(C.a,null,r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Title,null,this.props.goody.name),r.a.createElement(C.a.Text,null,r.a.createElement("div",{className:"goody-description"},this.props.goody.description)),r.a.createElement(N.a,{className:"list-group-flush"},r.a.createElement(G.a,null,this.props.goody.price.$numberDecimal," \u20ac")),r.a.createElement(y.a,{onClick:this.orderOne,variant:"primary"},"Order one")))))}}]),t}(a.Component),A=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).registerOne=function(e){O.registerEvent({username:localStorage.getItem("username"),eventname:n.props.event.name})},n.registerOne.bind(Object(h.a)(n)),n}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t=new Date(this.props.event.eventDate);return r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"custom-card goody-card"},r.a.createElement(C.a,null,r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Title,null,this.props.event.name),r.a.createElement(C.a.Text,null,r.a.createElement("div",{dangerouslySetInnerHTML:(e=this.props.event,{__html:e.description})})),r.a.createElement(C.a.Footer,null,r.a.createElement("p",null,"Event date:",r.a.createElement("b",{className:"event-date"},t.toLocaleDateString())),r.a.createElement(y.a,{onClick:this.registerOne,variant:"primary"},"Register one"))))))}}]),t}(a.Component),L=n(79),U=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).retriveData=function(){O.retriveGoodies().then(function(e){var t=n.state;t.goodies=e.data,n.setState(t)}),O.retrieveEvents().then(function(e){var t=n.state;t.events=e.data,n.setState(t)})},n.disconnect=function(e){O.logout(),window.location="/"},n.state={events:[],goodies:[]},n.disconnect.bind(Object(h.a)(n)),n.retriveData(),n}return Object(g.a)(t,e),Object(d.a)(t,[{key:"_renderGoodies",value:function(e,t){return r.a.createElement(I,{goody:e})}},{key:"_renderEvents",value:function(e,t){return r.a.createElement(A,{event:e})}},{key:"render",value:function(){var e=this.state,t=e.goodies,n=e.events;return r.a.createElement("div",null,r.a.createElement(S,null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-7 goodies-part"},r.a.createElement(L.a,null,r.a.createElement(k,{title:"MUG Goodies"},t?t.map(this._renderGoodies):"no data to display"))),r.a.createElement("div",{className:"col-sm-5 events-part"},r.a.createElement(k,{title:"MUG Events"},n?n.map(this._renderEvents):"no data to display"))))}}]),t}(r.a.Component),z=n(23),R=n(80),_=n(88),D=n(87),x=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).redirect=function(e){window.location="/signup"},n.send=function(e){0!==n.state.username.length&&0!==n.state.password.length&&O.login(n.state.username,n.state.password).then(function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("username",e.data.username),window.location="/home"},function(e){console.log(e)})},n.handleChange=function(e){n.setState(Object(z.a)({},e.target.id,e.target.value))},n.state={username:"",password:""},n.handleChange.bind(Object(h.a)(n)),n.send.bind(Object(h.a)(n)),n.redirect.bind(Object(h.a)(n)),n}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Login"},r.a.createElement(R.a,{controlId:"username",bsSize:"large"},r.a.createElement(_.a,null,"Username"),r.a.createElement(D.a,{autoFocus:!0,value:this.state.username,onChange:this.handleChange})),r.a.createElement(R.a,{controlId:"password",bsSize:"large"},r.a.createElement(_.a,null,"Password"),r.a.createElement(D.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),r.a.createElement(y.a,{onClick:this.send,block:!0,bsSize:"large",type:"submit"},"Connexion"),r.a.createElement(y.a,{onClick:this.redirect,block:!0,bsSize:"large",type:"submit"},"Sign up"))}}]),t}(r.a.Component),B=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).redirect=function(e){window.location="/"},n.send=function(e){if(0!==n.state.username.length&&0!==n.state.password.length&&n.state.password===n.state.cpassword){var t={username:n.state.username,password:n.state.password};O.signup(t).then(function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("username",e.data.username),window.location="/home"},function(e){console.log(e)})}},n.handleChange=function(e){n.setState(Object(z.a)({},e.target.id,e.target.value))},n.state={username:"",password:"",cpassword:""},n.handleChange.bind(Object(h.a)(n)),n.send.bind(Object(h.a)(n)),n.redirect.bind(Object(h.a)(n)),n}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Login"},r.a.createElement(R.a,{controlId:"username",bsSize:"large"},r.a.createElement(_.a,null,"Username"),r.a.createElement(D.a,{autoFocus:!0,value:this.state.username,onChange:this.handleChange})),r.a.createElement(R.a,{controlId:"password",bsSize:"large"},r.a.createElement(_.a,null,"Password"),r.a.createElement(D.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),r.a.createElement(R.a,{controlId:"cpassword",bsSize:"large"},r.a.createElement(_.a,null,"Confirm Password"),r.a.createElement(D.a,{value:this.state.cpassword,onChange:this.handleChange,type:"password"})),r.a.createElement(y.a,{onClick:this.send,block:!0,bsSize:"large",type:"submit"},"Inscription"),r.a.createElement(y.a,{onClick:this.redirect,block:!0,bsSize:"large",type:"submit"},"Login"))}}]),t}(r.a.Component),T=n(42),W=n(83),P=function(e){var t=e.component,n=Object(T.a)(e,["component"]);return r.a.createElement(c.a,Object.assign({},n,{render:function(e){e.location.pathname;return!1===O.isAuth()?r.a.createElement(W.a,{to:"/"}):r.a.createElement(t,e)}}))};n(76);var M=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i.a,null,r.a.createElement(c.a,{exact:!0,path:"/",component:x}),r.a.createElement(c.a,{exact:!0,path:"/signup",component:B}),r.a.createElement(P,{path:"/home",component:U})))},F=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var $=n(84);s.a.render(r.a.createElement($.a,null,r.a.createElement(M,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");F?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):J(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):J(t,e)})}}()}},[[45,1,2]]]);
//# sourceMappingURL=main.c8dfbf4f.chunk.js.map